{
  "chain_id": "11155111",
  "sender": "{{SENDER_ADDRESS}}",
  "delegate": "0x63cBcf35ea22FC674A23D453628398c60E1D05D5",
  "attestor": "ghcr.io/krnl-labs/executor-http@sha256:07ef35b261014304a0163502a7f1dec5395c5cac1fc381dc1f79b052389ab0d5",
  "target": {
    "contract": "0x63cBcf35ea22FC674A23D453628398c60E1D05D5",
    "function": "submitProofWithAuth((bytes32,address,bytes32,uint256,bytes32))",
    "authData_result": "${encode-proof.result}",
    "parameters": []
  },
  "sponsor_execution_fee": true,
  "value": "0",
  "intent": {
    "id": "{{TRANSACTION_INTENT_ID}}",
    "signature": "{{USER_SIGNATURE}}",
    "deadline": "{{TRANSACTION_INTENT_DEADLINE}}"
  },
  "rpc_url": "${_SECRETS.rpcSepoliaURL}",
  "bundler_url": "https://api.pimlico.io/v2/sepolia/rpc?apikey=${_SECRETS.pimlico-apikey}",
  "paymaster_url": "https://api.pimlico.io/v2/sepolia/rpc?apikey=${_SECRETS.pimlico-apikey}",
  "gas_limit": "150000",
  "max_fee_per_gas": "20000000000",
  "max_priority_fee_per_gas": "2000000000",
  "workflow": {
    "name": "quiz_verify",
    "version": "2.0.0",
    "steps": [
      {
        "name": "verify-answer",
        "type": "HTTP",
        "image": "ghcr.io/krnl-labs/executor-http@sha256:07ef35b261014304a0163502a7f1dec5395c5cac1fc381dc1f79b052389ab0d5",
        "next": "encode-proof",
        "config": {},
        "inputs": {
          "url": "${_SECRETS.supabaseUrl}/functions/v1/quiz-verify",
          "method": "POST",
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer ${_SECRETS.supabaseAnonKey}"
          },
          "body": {
            "sessionId": "{{INPUT.sessionId}}",
            "questionId": "{{INPUT.questionId}}",
            "answer": "{{INPUT.answer}}",
            "player": "{{INPUT.player}}"
          }
        },
        "outputs": [
          {
            "name": "proofData",
            "value": "response.body.proofData",
            "export": true
          },
          {
            "name": "isCorrect",
            "value": "response.body.isCorrect",
            "export": true
          }
        ]
      },
      {
        "name": "encode-proof",
        "type": "EVM_ENCODER",
        "image": "ghcr.io/krnl-labs/executor-encoder-evm@sha256:b28823d12eb1b16cbcc34c751302cd2dbe7e35480a5bc20e4e7ad50a059b6611",
        "config": {
          "parameters": [
            {
              "name": "proof",
              "type": "tuple",
              "components": [
                { "name": "sessionId", "type": "bytes32" },
                { "name": "player", "type": "address" },
                { "name": "questionId", "type": "bytes32" },
                { "name": "scoreDelta", "type": "uint256" },
                { "name": "proofHash", "type": "bytes32" }
              ]
            }
          ]
        },
        "inputs": {
          "value": {
            "proof": "${verify-answer.proofData}"
          }
        },
        "outputs": [
          {
            "name": "result",
            "value": "result",
            "export": true
          }
        ]
      }
    ]
  }
}
